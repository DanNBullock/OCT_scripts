#
# OCT Scripts

**Authors**

- Daniel Bullock ([dnbulloc@iu.edu](mailto:dnbulloc@iu.edu))
- Jasleen Jolly (email)

**Lab Directors**

- Franco Pestilli ([franpest@indiana.edu](mailto:franpest@indiana.edu)) - Indiana University Bloomington
- ?  -  University of Oxford

**Running this code**

This code is written in Matlab.  It makes use of the imresize function and thus requires Matlab&#39;s image processing toolkit.

The primary wrapper function is OCT\_MRI\_Script.m which goes from individual raw data all the way to subject-level analysis.   Thus, once the local github repository has been added to Matlab&#39;s path, running the contents of OCT\_MRI\_Script.m should be sufficient to perform the full analysis.

**Code details**

It directly calls the following functions:



| **Function name** | **Function description** | **Variable / Parameter inputs** |
| --- | --- | --- |
| createCSVsumOutputFiles | Iteratively takes data generated by Voxeleron&#39;s [deviceName] and computes subject-level amalgam csv outputs in accordance with requested layer sequences | rawSubjDataDir, targetOutputDir,layerIndexSequences, analysesNames, |
| analyzeOCTDataWrapper | For each of the layer sequence amalgams generated by createCSVsumOutputFiles, performs an iterative, degree wise analysis and creates a subject-level output csv. | analysisMeanDir,centroidCSVPath,visFieldDiam,theshFloor,gaussKernel,meanShape, |
| OCTGroupAnalysisWrapper | Creates group level analysis outputs based on a keyfile identifying group membership. | inputDir,groupKeyDir,outputDir |

Several of the variables are simply paths to files or directories containing necessary data/metadata



| **File/Path variable name** | **Contents** | **Structure/Naming convention** |
| --- | --- | --- |
| rawSubjDataDir | Directory containing subject-level data generated by Voxeleron&#39;s [deviceName] | Name(s): &quot;[subjectNum]\_[eyeLabel]\_T.csv&quot;Structure: TBD |
| targetOutputDir | Directory containing (or to contain) the subject-level amalgam csv outputs generated by createCSVsumOutputFiles | Name(s): &quot;[subjectNum]\_[eyeLabel]\_[layerLabel].csv&quot;Structure: TBD |
| analysisMeanDir | Directory containing (or to contain) subject-level analyses (degree iterated means) | Name(s): &quot;[subjectNum]\_[eyeLabel]\_meanTable.csv&quot;&amp;&quot;[subjectNum]\_[eyeLabel]\_stdTable.csv&quot;Structure: TBD |
| outputDir | Directory containing (or to contain) group-level analyses (degree-wise, cross-subject means) | Name(s): &quot;[eyeLabel]\_GroupMean\_[groupLabel].csv&quot;&amp;&quot;[eyeLabel]\_StdMean\_[groupLabel].csv&quot;Structure: TBD |
| centroidCSVPath | Path to a specific csv file which contains (among other information) the centroid location of each subject in the entire dataset | Name(s):&quot;Location.csv&quot;Structure: TBD |
| groupKeyDir | A directory counting csv files (named after the group name) containing subject ID&#39;s corresponding to group membership | Name(s):&quot;[groupLabel].xlsxStructure: TBD |

The rest of the variables are parameters which the user may modify in order to impact their analysis as desired.

| **Parameter variable name** | **Purpose** | **Specifications** |
| --- | --- | --- |
| layerIndexSequences | Indicates which layers are to be summed in createCSVsumOutputFiles to generate the layer amalgams that will be processed later. | Sequence[1] of sequence[2] of integers.  Sequence[1] must be equal to the number of inputs in analysesNames.  sequence[2] must be unique integers which do not exceed the total number of layers obtained from Voxeleron&#39;s [deviceName] |
| analysesNames | Indicates the abbreviation for the layer amalgam, corresponds to [specify standard]. | Set of strings, equal in length to sequence[1] of layerIndexSequences |
| visFieldDiam | Indicates the total _diameter_ of the visual field measured by the experimenter.  Assumed to be consistent across subjects.  The user/experimenter should know this about their data. | Numerical value |
| theshFloor | Specifies the desired threshold to be applied to input data obtained from createCSVsumOutputFiles.   Applied across subjects (prior to computation of means).  Values below this are set to NaN and are not featured in computation of mean.  If no threshold is desired, enter a value of []. | Numerical value |
| gaussKernel | Specifies the desired smoothing kernel to be applied to input data obtained from createCSVsumOutputFiles.   Applied across subjects (prior to computation of means).  Pixel values are thus the result of a gaussian smoothing process.  If no threshold is desired, enter a value of [] or 1. | Odd integer value |
| meanShape | Specifies the desired method for computing the mean.  &quot;rings&quot; will generate averages for concentric, degree-specific rings (like a bullseye), while &quot;full&quot; will compute the mean for the entire visual field (to the specified current, iterated degree). | Either &quot;rings&quot; or &quot;full&quot; |
